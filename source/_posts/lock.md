---
title: 各种锁:自旋锁/互斥锁/读写锁/分布式锁
date: 2016-04-29 00:00:00
categories:
- code
tags: 
- lock
mathjax: true
description: 
---

# 锁
锁在计算机的世界里随处可见，当大家都想操作一个资源的时候，如果一窝蜂涌进来，就会出事的。
在并发编程中，尽量少用锁，能不用就不用，因为锁的开销很大很大。尽量让不同的执行单元操作各自独立的数据，如果不可避免要用到锁，那么锁的范围要尽量小。


<!--more-->
# 自旋锁vs互斥锁

类|特征|使用场景
---|---|---
自旋|不会休眠，不停重试，直到获得锁|锁住的代码执行时间很短。因为休眠再唤醒的开销很大。如果时间短，那么自旋的开销就很小
互斥|休眠，等锁被释放才会被唤醒|锁住的代码要执行很久，如果是自旋锁，就会不停尝试，被锁住的代码分不到足够的时间片，但是性能下降

# 读写锁
场景：读多写少
条件：
- 只要没有写锁，就能获取到读锁
- 只有没有任锁，才能获取到写锁

----------------------------

`本博客欢迎转发,但请保留原作者信息`
github:[codejuan](https://github.com/CodeJuan)
博客地址:http://blog.decbug.com/
